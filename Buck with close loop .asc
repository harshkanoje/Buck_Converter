Version 4
SHEET 1 880 1032
WIRE -176 240 -272 240
WIRE -16 240 -80 240
WIRE 80 240 -16 240
WIRE 176 240 80 240
WIRE 384 240 256 240
WIRE 528 240 384 240
WIRE 640 240 528 240
WIRE -272 288 -272 240
WIRE 528 288 528 240
WIRE 80 304 80 240
WIRE 384 304 384 240
WIRE -16 336 -16 240
WIRE -96 384 -96 368
WIRE -16 384 -16 336
WIRE -16 384 -96 384
WIRE -272 400 -272 368
WIRE 80 400 80 368
WIRE 80 400 -272 400
WIRE 160 400 80 400
WIRE 384 400 384 368
WIRE 384 400 160 400
WIRE 528 400 528 368
WIRE 528 400 384 400
WIRE 160 432 160 400
WIRE 176 608 144 608
WIRE 320 608 240 608
WIRE 416 608 384 608
WIRE 640 640 640 240
WIRE 640 640 576 640
WIRE 144 656 144 608
WIRE 144 656 112 656
WIRE 416 656 416 608
WIRE 512 656 416 656
WIRE -32 672 -48 672
WIRE 48 672 -32 672
WIRE 720 672 576 672
WIRE 144 688 112 688
WIRE 720 688 720 672
WIRE 144 704 144 688
WIRE 320 704 144 704
WIRE 416 704 416 656
WIRE 416 704 384 704
WIRE -64 768 -112 768
WIRE 720 800 720 768
WIRE -64 816 -64 768
WIRE -64 928 -64 896
FLAG 528 240 Vout
IOPIN 528 240 Out
FLAG -272 240 Vin
IOPIN -272 240 In
FLAG -16 336 Vgate
FLAG 160 432 0
FLAG 720 800 0
FLAG -32 672 Comp_out
FLAG -64 928 0
FLAG -112 768 Tri
SYMBOL voltage -272 272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vin
SYMATTR Value 12
SYMBOL cap 368 304 R0
SYMATTR InstName C1
SYMATTR Value 179.16µ
SYMBOL ind 160 256 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 72.6µ
SYMBOL schottky 96 368 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -14 114 VLeft 2
SYMATTR InstName D1
SYMATTR Value MBR745
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL nmos -176 288 R270
SYMATTR InstName M1
SYMATTR Value AOE66410
SYMBOL res 512 272 R0
SYMATTR InstName R1
SYMATTR Value 7.2
SYMBOL voltage -96 272 R0
WINDOW 3 -221 205 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 12 0 1n 1n 16.125u 32.25u)
SYMATTR InstName V2
SYMBOL Gain 352 704 R180
WINDOW 39 -20 34 Left 0
SYMATTR SpiceLine K=R2/R1
SYMATTR InstName X1
SYMBOL Gain 352 608 R180
WINDOW 39 -48 46 Left 0
SYMATTR SpiceLine K={1/(R1*C)}
SYMATTR InstName X2
SYMBOL integrator 208 608 R180
WINDOW 39 0 0 Left 0
SYMATTR InstName X3
SYMBOL Adder 80 672 R180
SYMATTR InstName X4
SYMBOL voltage 720 672 R0
SYMATTR InstName Vref
SYMATTR Value 5
SYMBOL Sub 544 656 R180
SYMATTR InstName X5
SYMBOL voltage -64 800 R0
WINDOW 3 -428 178 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(-10 10 0 {1/(2*Fs)} {1/(2*Fs)} 1n {1/(Fs)})
SYMATTR InstName V1
SYMBOL bv -512 576 R0
WINDOW 3 201 -157 Left 2
SYMATTR Value V=if(V(Tri)>V(Comp_out),15,0)
SYMATTR InstName B1
TEXT 192 440 Left 2 !.tran 10ms
TEXT 168 856 Left 2 !.param R1=1k\n.param R2 = 2.7k\n.param C = 20n
TEXT 120 824 Left 2 !Control Net Implementation
TEXT 448 640 Left 2 !error
TEXT -104 1016 Left 2 !.param Fs=100k
